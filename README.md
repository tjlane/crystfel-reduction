# crystfel-reduction
perform data reduction using crystFEL -- for now at swissFEL

### Before any workflows
Fill in a `project_template.yaml`

### Workflow: Online
Begin with stream files generated by online indexing: just need to merge
1. `merge-runset.py --online` --> creates MTZs
2. diffmaps & extrapolation

### Workflow: Offline
1. `optimize_each_runs_geometry.py`
2. check the result - `geometry_results.ipynb`
3. `index_all_runs.py`
4. check the result - `indexing_results.ipynb`
5. `merge-runset.py --offline`
6. check the result - `evaluate_merge_stats.ipynb`
7. diffmaps & extrapolation


TODO:
 - [ ] test merging both online and offline for historical data
 - [ ] test other scripts, too -- make a little set of quick tests
